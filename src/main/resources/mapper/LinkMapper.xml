<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.cyong.dao.LinkMapper" >
  <resultMap id="BaseResultMap" type="com.cyong.model.Link" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 25 11:12:50 CST 2021.
    -->
    <id column="link_id" property="linkId" jdbcType="INTEGER" />
    <result column="link_type" property="linkType" jdbcType="TINYINT" />
    <result column="link_name" property="linkName" jdbcType="VARCHAR" />
    <result column="link_url" property="linkUrl" jdbcType="VARCHAR" />
    <result column="link_description" property="linkDescription" jdbcType="VARCHAR" />
    <result column="link_rank" property="linkRank" jdbcType="INTEGER" />
    <result column="link_is_deleted" property="linkIsDeleted" jdbcType="TINYINT" />
    <result column="link_create_time" property="linkCreateTime" jdbcType="TIMESTAMP" />
    <result column="link_avater" property="linkAvater" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 25 11:12:50 CST 2021.
    -->
    link_id, link_type, link_name, link_url, link_description, link_rank, link_is_deleted, 
    link_create_time,link_avater
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 25 11:12:50 CST 2021.
    -->
    select 
    <include refid="Base_Column_List" />
    from tb_link
    where link_id = #{linkId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 25 11:12:50 CST 2021.
    -->
    delete from tb_link
    where link_id = #{linkId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.cyong.model.Link" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 25 11:12:50 CST 2021.
    -->
    insert into tb_link (link_id, link_type, link_name, 
      link_url, link_description, link_rank, 
      link_is_deleted, link_create_time,link_url,link_avater)
    values (#{linkId,jdbcType=INTEGER}, #{linkType,jdbcType=TINYINT}, #{linkName,jdbcType=VARCHAR}, 
      #{linkUrl,jdbcType=VARCHAR}, #{linkDescription,jdbcType=VARCHAR}, #{linkRank,jdbcType=INTEGER}, 
      #{linkIsDeleted,jdbcType=TINYINT}, #{linkCreateTime,jdbcType=TIMESTAMP}, #{linkAvater,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.cyong.model.Link" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 25 11:12:50 CST 2021.
    -->
    insert into tb_link
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="linkId != null" >
        link_id,
      </if>
      <if test="linkType != null" >
        link_type,
      </if>
      <if test="linkName != null" >
        link_name,
      </if>
      <if test="linkUrl != null" >
        link_url,
      </if>
      <if test="linkDescription != null" >
        link_description,
      </if>
      <if test="linkRank != null" >
        link_rank,
      </if>
      <if test="linkIsDeleted != null" >
        link_is_deleted,
      </if>
      <if test="linkCreateTime != null" >
        link_create_time,
      </if>
      <if test="linkAvater != null" >
        link_avater,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="linkId != null" >
        #{linkId,jdbcType=INTEGER},
      </if>
      <if test="linkType != null" >
        #{linkType,jdbcType=TINYINT},
      </if>
      <if test="linkName != null" >
        #{linkName,jdbcType=VARCHAR},
      </if>
      <if test="linkUrl != null" >
        #{linkUrl,jdbcType=VARCHAR},
      </if>
      <if test="linkDescription != null" >
        #{linkDescription,jdbcType=VARCHAR},
      </if>
      <if test="linkRank != null" >
        #{linkRank,jdbcType=INTEGER},
      </if>
      <if test="linkIsDeleted != null" >
        #{linkIsDeleted,jdbcType=TINYINT},
      </if>
      <if test="linkCreateTime != null" >
        #{linkCreateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="linkAvater != null" >
        #{linkAvater,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.cyong.model.Link" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 25 11:12:50 CST 2021.
    -->
    update tb_link
    <set >
      <if test="linkType != null" >
        link_type = #{linkType,jdbcType=TINYINT},
      </if>
      <if test="linkName != null" >
        link_name = #{linkName,jdbcType=VARCHAR},
      </if>
      <if test="linkUrl != null" >
        link_url = #{linkUrl,jdbcType=VARCHAR},
      </if>
      <if test="linkDescription != null" >
        link_description = #{linkDescription,jdbcType=VARCHAR},
      </if>
      <if test="linkRank != null" >
        link_rank = #{linkRank,jdbcType=INTEGER},
      </if>
      <if test="linkIsDeleted != null" >
        link_is_deleted = #{linkIsDeleted,jdbcType=TINYINT},
      </if>
      <if test="linkCreateTime != null" >
        link_create_time = #{linkCreateTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where link_id = #{linkId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.cyong.model.Link" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Mon Oct 25 11:12:50 CST 2021.
    -->
    update tb_link
    set link_type = #{linkType,jdbcType=TINYINT},
      link_name = #{linkName,jdbcType=VARCHAR},
      link_url = #{linkUrl,jdbcType=VARCHAR},
      link_description = #{linkDescription,jdbcType=VARCHAR},
      link_rank = #{linkRank,jdbcType=INTEGER},
      link_is_deleted = #{linkIsDeleted,jdbcType=TINYINT},
      link_create_time = #{linkCreateTime,jdbcType=TIMESTAMP}
    where link_id = #{linkId,jdbcType=INTEGER}
  </update>
  <select id="selectLinkNum" resultType="int">
    select count(1)
    from tb_link
  </select>

  <select id="vagueSearchLink" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from tb_link
    <where>
      <if test="linkKinds!=null">
        <foreach collection="linkKinds" item="item" index="index"
                 open="link_type in (" separator="," close=")">
          #{item}
        </foreach>
      </if>
      <if test="searchKey!=''">
        and link_name like concat('%',#{searchKey,jdbcType=VARCHAR},'%')
        or link_description like concat('%',#{searchKey,jdbcType=VARCHAR},'%')
      </if>
    </where>
    <if test="sortField != ''">
      <if test="sortField == 'linktitle' and sortOrder == 'ascend'">
        order by link_name ASC
      </if>
      <if test="sortField == 'linktitle' and sortOrder == 'descend'">
        order by link_name DESC
      </if>
      <if test="sortField == 'linkCreateTime' and sortOrder == 'ascend'">
        order by link_create_time ASC
      </if>
      <if test="sortField == 'linkCreateTime' and sortOrder == 'descend'">
        order by link_create_time DESC
      </if>
    </if>
  </select>

</mapper>